<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
  <mapper namespace="albumDao">

	<select id="albumAll" resultType="int">
		select count(*) from album 
	</select> 
	
	<select id="albumList" parameterType="pageDto" resultType="albumDto">
		select * from album a LEFT JOIN member m on m.memberNo = a.memberNo 
	</select>
	
	<insert id="albumIns" parameterType="bookDto">
 		insert into album (bookNo,memberId,albumTitle,albumCont,albumSysdate)
 			values(#{bookNo}, #{memberId},#{albumTitle},#{albumCont},now())	
 	</insert>
 	
 	<select id="totalAlbum" parameterType="int" resultType="albumDto">
      select b.bookCover from album_detail d LEFT JOIN album a ON d.albumNo = a.albumNo
         LEFT JOIN book b on b.bookNO = d.bookNo where d.albumNo = #{albumNo} limit 3
   </select>
 	
  </mapper>